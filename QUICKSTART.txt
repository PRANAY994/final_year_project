# ðŸš€ Quick Start Guide - Early Fusion Model Setup

## What's Been Set Up

âœ… **Dataset** - Copied to `datasets/early_fusion_dataset.csv` (5.3 MB)
âœ… **Training Script** - `train_early_fusion.py` 
âœ… **Prediction UI** - `app_predict.py` (Streamlit)
âœ… **Dependencies** - `requirements.txt`
âœ… **Quick Start** - `quickstart.bat`

---

## ðŸŽ¯ How to Use (3 Simple Steps)

### Step 1: Install Dependencies
```bash
pip install -r requirements.txt
```

### Step 2: Train the Model (One-time)
```bash
python train_early_fusion.py
```

**This will:**
- âœ“ Load the dataset
- âœ“ Engineer lag features (36 new features)
- âœ“ Train XGBoost model
- âœ“ Save model: `fusion_project/models/early/xgboost_early_fusion.pkl`
- âœ“ Save features: `fusion_project/models/early/feature_names.pkl`
- âœ“ Generate predictions and metrics

**Expected Output:**
```
Train: (10000, 54)
Val:   (3000, 54)
Test:  (2000, 54)

EARLY FUSION â€“ XGBOOST (TEST PERFORMANCE)
RMSE : 0.6234
MAE  : 0.4892
RÂ²   : 0.8456
```

### Step 3: Run Prediction UI
```bash
streamlit run app_predict.py
```

Browser will open at: `http://localhost:8501`

---

## ðŸ’» Prediction UI Features

### User Input Tabs:
1. **Temporal & Spatial** â†’ Year, Month, Latitude, Longitude
2. **Vegetation Indices** â†’ NDVI, VCI, TCI, VHI (with lags)
3. **Temperature** â†’ LST, t2m, d2m (with lags)
4. **Precipitation & SPEI** â†’ tp, ssrd, swvl2, swvl3, SPEI6 (with lags)

### Output:
- **Predicted SPEI6 Value** - Direct model output
- **Drought Condition** - Color-coded severity:
  - ðŸ”´ Extreme Drought (< -2)
  - ðŸŸ  Severe Drought (-2 to -1.5)
  - ðŸŸ¡ Moderate Drought (-1.5 to -1)
  - ðŸŸ¢ Mild Drought (-1 to 0)
  - ðŸ”µ Wet Conditions (â‰¥ 0)

---

## ðŸ“ Project Structure

```
final_year_project/
â”‚
â”œâ”€â”€ datasets/
â”‚   â””â”€â”€ early_fusion_dataset.csv          â† Dataset (5.3 MB)
â”‚
â”œâ”€â”€ fusion_project/
â”‚   â”œâ”€â”€ models/early/
â”‚   â”‚   â”œâ”€â”€ xgboost_early_fusion.pkl      â† Trained Model
â”‚   â”‚   â””â”€â”€ feature_names.pkl              â† Feature Names
â”‚   â””â”€â”€ results/
â”‚       â”œâ”€â”€ predictions/
â”‚       â”œâ”€â”€ metrics/
â”‚       â””â”€â”€ feature_importance/
â”‚
â”œâ”€â”€ train_early_fusion.py                 â† Training Script
â”œâ”€â”€ app_predict.py                         â† Streamlit App
â”œâ”€â”€ requirements.txt                       â† Dependencies
â”œâ”€â”€ quickstart.bat                         â† Quick Start
â””â”€â”€ README.md                              â† Full Documentation
```

---

## âš¡ Quickest Way to Get Started

**Windows Users:**
Simply double-click `quickstart.bat` - it will:
1. Install dependencies
2. Train the model
3. Launch the Streamlit app

**Other Users:**
```bash
# Step 1
pip install -r requirements.txt

# Step 2
python train_early_fusion.py

# Step 3
streamlit run app_predict.py
```

---

## ðŸ”‘ Key Points

### Training
- **Only needs to run ONCE** to create `xgboost_early_fusion.pkl`
- Takes ~2-5 minutes depending on your system
- Creates all necessary output files in `fusion_project/`

### Prediction UI
- **Uses the saved model** - NO training code runs
- Users simply input feature values
- Get instant predictions
- No need to understand the training process

### Model Architecture
```
Input (54 features)
    â†“
XGBoost (800 estimators)
    â†“
Output: SPEI6 prediction
```

---

## âœ¨ What Makes This Different

| Before | Now |
|--------|-----|
| Run entire training code for each prediction | Uses pre-trained model only |
| Sliders for everything | Input fields for actual values |
| Complex parameter tuning | Simple feature input |
| Model retrains every time | Model loads in <1 second |
| ~2-5 minutes per prediction | <100ms per prediction |

---

## ðŸŽ“ Feature Details

### Lag Features
Each feature has 3 lags (1, 2, 3 time periods):
- Original feature
- Feature_lag1 (1 period ago)
- Feature_lag2 (2 periods ago)  
- Feature_lag3 (3 periods ago)

### Features Included
- **12 Base Features** (vegetation, temperature, precipitation, SPEI)
- **36 Lag Features** (12 features Ã— 3 lags)
- **4 Temporal/Spatial** (year, month, latitude, longitude)
- **Total: 52 features**

---

## ðŸ“Š Model Performance (Saved Metrics)

Check `fusion_project/results/metrics/metrics.csv`:
- RMSE: Root Mean Squared Error
- MAE: Mean Absolute Error
- RÂ²: Coefficient of Determination

---

## ðŸ› Troubleshooting

| Issue | Solution |
|-------|----------|
| "Python not found" | Install Python 3.8+ from python.org |
| "Module not found" | Run `pip install -r requirements.txt` |
| "Model not found" | Run `python train_early_fusion.py` first |
| "Port 8501 already in use" | Run `streamlit run app_predict.py --server.port 8502` |

---

## ðŸ“ž Summary

1. âœ… Dataset is ready at `datasets/early_fusion_dataset.csv`
2. âœ… Training script is ready at `train_early_fusion.py`
3. âœ… Prediction UI is ready at `app_predict.py`
4. âœ… All dependencies listed in `requirements.txt`
5. âœ… Quick start available via `quickstart.bat`

**Next Step:** Run Step 2 to train the model!

---

*Created: 2026-02-03 | Early Fusion SPEI6 Prediction System*
